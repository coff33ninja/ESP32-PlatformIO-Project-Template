[platformio]
default_envs = esp32-s3-devkitc-1
description = ESP32 PlatformIO Project Template - Multi-Board Support

; =============================================================================
; MAIN ENVIRONMENT - ESP32 Development Board (Generic)
; Use 'python scripts/board_config.py' to configure for different boards
; =============================================================================

[env:esp32-s3-devkitc-1]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino

; Library dependencies
lib_deps = 
    ; Web server and WiFi functionality
    ESP32WebServer
    ; JSON handling (uncomment if needed)
    ; bblanchon/ArduinoJson@^7.0.0
    ; Add your project libraries here

; Source filter (exclude example files)
build_src_filter = +<*> -<*.example.cpp>

; Build flags (board-specific flags added by board_config.py)
build_flags = 
    -DCORE_DEBUG_LEVEL=0
    ; PSRAM flags added automatically for supported boards

; Upload settings
upload_speed = 921600
upload_port = COM5

; Monitor settings
monitor_port = COM3
monitor_speed = 115200
monitor_filters = 
    esp32_exception_decoder
    time
    log2file

; OTA settings
upload_protocol = esptool
upload_flags = 
    --flash_mode=dio
    --flash_freq=80m

; Debugging
debug_tool = esp-prog
debug_init_break = tbreak setup

; SPIFFS settings
board_build.filesystem = spiffs
board_build.partitions = default.csv

; =============================================================================
; DEBUG ENVIRONMENT
; =============================================================================

[env:esp32dev_debug]
extends = env:esp32dev
build_type = debug
build_flags = 
    ${env:esp32dev.build_flags}
    -DCORE_DEBUG_LEVEL=5
    -DDEBUG_ESP_PORT=Serial
    -DDEBUG_ESP_WIFI
    -DDEBUG_ESP_HTTP_SERVER

; =============================================================================
; OTA UPDATE ENVIRONMENT
; =============================================================================

[env:esp32dev_ota]
extends = env:esp32dev
upload_protocol = espota
upload_port = esp-device.local
upload_flags = 
    --port=3232
    --auth=admin

; =============================================================================
; BOARD-SPECIFIC ENVIRONMENTS (Generated by board_config.py)
; =============================================================================

; Additional board environments will be added here when using board_config.py
; Examples:
; [env:esp32-s3-devkitc-1] - ESP32-S3 with PSRAM and AI acceleration
; [env:esp32-c3-devkitm-1] - ESP32-C3 RISC-V with WiFi and Bluetooth 5
; [env:esp32-s2-saola-1]   - ESP32-S2 with USB-OTG support